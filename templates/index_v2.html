{% extends "base_v2.html" %}

{% block title %}Multi-Fund Holdings Lookup{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <!-- Hero Section -->
        <div class="text-center mb-5">
            <h1 class="display-4">Do I own this stock?</h1>
            <p class="lead text-muted">
                Search across multiple index funds to see your holdings
            </p>
            
            <!-- Fund badges -->
            <div class="mt-3" id="fund-badges">
                <!-- Will be populated by JavaScript -->
            </div>
        </div>

        <!-- Search Form -->
        <div class="card shadow-sm mb-5">
            <div class="card-body p-4">
                <form id="search-form">
                    <div class="input-group input-group-lg">
                        <input 
                            type="text" 
                            class="form-control" 
                            id="search-input" 
                            placeholder="Enter ticker (AAPL) or company name (Apple)"
                            required
                            autofocus
                        >
                        <button class="btn btn-primary" type="submit">
                            Search All Funds
                        </button>
                    </div>
                </form>
                
                <!-- Quick Search Examples -->
                <div class="mt-3">
                    <small class="text-muted">Try: 
                        <a href="#" class="quick-search">AAPL</a>, 
                        <a href="#" class="quick-search">Tesla</a>, 
                        <a href="#" class="quick-search">MSFT</a>, 
                        <a href="#" class="quick-search">Amazon</a>
                    </small>
                </div>
            </div>
        </div>

        <!-- Search Results -->
        <div id="search-results"></div>

        <!-- Loading Spinner -->
        <div id="loading" class="text-center d-none">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
    </div>
</div>

<!-- Fund Summary Cards -->
<div class="row mt-5" id="fund-summary">
    <!-- Will be populated by JavaScript -->
</div>

<!-- Top Holdings by Fund -->
<div class="row mt-5">
    <div class="col-12">
        <h3>Top Holdings by Fund</h3>
        <div class="accordion" id="fundAccordion">
            <!-- Will be populated by JavaScript -->
        </div>
    </div>
</div>

<style>
.fund-badge {
    display: inline-block;
    padding: 0.25rem 0.75rem;
    margin: 0.25rem;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 500;
}

.fund-result-card {
    border-left: 4px solid;
    margin-bottom: 1rem;
}

.fund-VTSAX { border-color: #1f77b4; }
.fund-VOO { border-color: #ff7f0e; }
.fund-VTI { border-color: #2ca02c; }
.fund-VUG { border-color: #d62728; }
.fund-VTV { border-color: #9467bd; }

.holdings-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
}

.holding-card {
    background: #f8f9fa;
    padding: 1rem;
    border-radius: 8px;
    border: 1px solid #dee2e6;
}
</style>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='app_v2.js') }}"></script>
{% endblock %}